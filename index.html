<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì „ìê³„ì•½ ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;700&family=Noto+Sans+KR:wght@400;700&display=swap');
        
        body { background-color: #f3f4f6; font-family: 'Noto Sans KR', sans-serif; }
        
        /* ì‹¤ì œ ì¶œë ¥ë  A4 ê³„ì•½ì„œ ìŠ¤íƒ€ì¼ */
        .contract-paper {
            font-family: 'Noto Serif KR', serif;
            width: 210mm;
            min-height: 297mm;
            padding: 20mm;
            background: white;
            color: #1a1a1a;
            margin: 0 auto;
            position: relative;
            box-sizing: border-box;
            line-height: 1.6;
        }

        .title { text-align: center; font-size: 26px; font-weight: bold; margin-bottom: 30px; text-decoration: underline; text-underline-offset: 8px; }
        .sub-title { font-weight: bold; font-size: 14px; margin-top: 20px; margin-bottom: 8px; border-left: 4px solid #333; padding-left: 8px; }
        
        /* ê³„ì•½ì„œ ë‚´ë¶€ í…Œì´ë¸” */
        .c-table { width: 100%; border-collapse: collapse; font-size: 12px; margin-bottom: 10px; }
        .c-table th, .c-table td { border: 1px solid #444; padding: 6px 8px; }
        .c-table th { background-color: #eee; text-align: center; width: 90px; font-weight: bold; }
        .c-table td { background-color: #fff; }

        /* ì„œëª…ë€ ìŠ¤íƒ€ì¼ */
        .sign-section { margin-top: 30px; font-size: 12px; display: flex; flex-direction: column; gap: 15px; }
        .sign-box { border: 1px solid #ccc; padding: 10px; border-radius: 4px; }
        .sign-header { font-weight: bold; margin-bottom: 5px; font-size: 13px; }
        .sign-row { display: flex; margin-bottom: 4px; }
        .sign-label { width: 70px; font-weight: bold; color: #555; }
        .sign-value { flex: 1; border-bottom: 1px dotted #999; }

        /* ê³µí†µ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .btn-common { padding: 14px 0; border-radius: 8px; font-weight: bold; font-size: 16px; transition: 0.2s; text-align: center; cursor: pointer; }
        .btn-prev { background-color: #e5e7eb; color: #4b5563; width: 30%; }
        .btn-prev:hover { background-color: #d1d5db; }
        .btn-next { background-color: #2563eb; color: white; width: 68%; }
        .btn-next:hover { background-color: #1d4ed8; }
        .btn-full { width: 100%; }

        /* PDF ìƒì„± ì‹œì—ë§Œ ì ê¹ ë³´ì´ëŠ” ìš©ë„ */
        .hidden-screen { position: absolute; left: -9999px; top: -9999px; }
    </style>
</head>
<body>

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef } = React;
        const { jsPDF } = window.jspdf;

        // ì€í–‰ ëª©ë¡
        const BANK_LIST = [
            "KBêµ­ë¯¼", "ì‹ í•œ", "ìš°ë¦¬", "í•˜ë‚˜", "IBKê¸°ì—…", "NHë†í˜‘", "ì¹´ì¹´ì˜¤ë±…í¬", "í† ìŠ¤ë±…í¬", 
            "ì¼€ì´ë±…í¬", "SCì œì¼", "í•œêµ­ì”¨í‹°", "ìš°ì²´êµ­", "ìƒˆë§ˆì„ê¸ˆê³ ", "ìˆ˜í˜‘", "ì‹ í˜‘", 
            "ì €ì¶•ì€í–‰", "ì‚°ì—…", "ì‚°ë¦¼", "ëŒ€êµ¬", "ë¶€ì‚°", "ê²½ë‚¨", "ê´‘ì£¼", "ì „ë¶", "ì œì£¼", "ë„ì´ì¹˜", "HSBC"
        ];

        function App() {
            const [step, setStep] = useState(1);
            const [payStatus, setPayStatus] = useState("pending"); // pending, card_sent, cash_check
            const contractRef = useRef(null);

            // ë°ì´í„° ìƒíƒœ (ì—¬ê¸° ì…ë ¥í•˜ë©´ ê³„ì•½ì„œ ì „ì²´ì— ìë™ ë°˜ì˜ë¨)
            const [data, setData] = useState({
                // 1. ë¶€ë™ì‚° & ì„ëŒ€ì¸ ì •ë³´
                address: "",
                buildingType: "ì•„íŒŒíŠ¸",
                area: "",
                deposit: "",
                contractMoney: "",
                rent: "0",
                payDate: "ë§¤ì›” ë§ì¼",
                startDate: "",
                endDate: "",
                
                lessorName: "",
                lessorPhone: "",
                lessorId: "",
                lessorAddress: "",
                bankName: "KBêµ­ë¯¼",
                accountNum: "",

                // 2. ì„ì°¨ì¸ ì •ë³´
                lesseeName: "",
                lesseePhone: "",
                lesseeId: "",
                lesseeAddress: ""
            });

            const handleChange = (e) => {
                const { name, value } = e.target;
                setData({ ...data, [name]: value });
            };

            const goBack = () => { if(step > 1) setStep(step - 1); };
            const goNext = () => setStep(step + 1);

            // PDF ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ (ì‹¤ì œ íŒŒì¼ ìƒì„±)
            const handleDownload = async () => {
                const element = contractRef.current;
                
                // 1. ìº¡ì²˜ë¥¼ ìœ„í•´ ì„ì‹œë¡œ ë³´ì´ê²Œ ì„¤ì •
                const originalStyle = element.getAttribute("style");
                if(step !== 3) { // ë¯¸ë¦¬ë³´ê¸° í™”ë©´ì´ ì•„ë‹ˆë©´ ê°•ì œë¡œ ë³´ì´ê²Œ ì²˜ë¦¬
                    element.style.position = 'fixed';
                    element.style.top = '0';
                    element.style.left = '0';
                    element.style.zIndex = '-1'; // í™”ë©´ ë’¤ë¡œ ìˆ¨ê¹€ (ì‚¬ìš©ìì—ê² ì•ˆë³´ì´ê²Œ)
                    element.style.display = 'block';
                }

                // 2. ìº¡ì²˜ (ê³ í•´ìƒë„)
                const canvas = await html2canvas(element, { scale: 2, logging: false });
                const imgData = canvas.toDataURL('image/png');
                
                // 3. PDF ìƒì„± (A4)
                const pdf = new jsPDF('p', 'mm', 'a4');
                const pdfWidth = pdf.internal.pageSize.getWidth();
                const pdfHeight = (canvas.height * pdfWidth) / canvas.width;
                
                pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
                pdf.save(`${data.lesseeName || 'ê³„ì•½ì'}_ì„ëŒ€ì°¨ê³„ì•½ì„œ.pdf`);

                // 4. ì›ë³µ
                if(step !== 3) {
                    element.setAttribute("style", originalStyle);
                }
            };

            return (
                <div className="min-h-screen flex flex-col items-center py-8 px-4 max-w-lg mx-auto">
                    
                    {/* ìƒë‹¨ ì§„í–‰ ìƒíƒœë°” */}
                    <div className="flex w-full justify-between mb-8 text-xs font-bold text-gray-400">
                        <div className={step >= 1 ? "text-blue-600" : ""}>1.ê³„ì•½ì¡°ê±´</div>
                        <div className={step >= 2 ? "text-blue-600" : ""}>2.ì„ì°¨ì¸</div>
                        <div className={step >= 3 ? "text-blue-600" : ""}>3.í™•ì¸</div>
                        <div className={step >= 4 ? "text-blue-600" : ""}>4.ê²°ì œ</div>
                        <div className={step >= 5 ? "text-blue-600" : ""}>5.ë‹¤ìš´ë¡œë“œ</div>
                    </div>

                    <div className="w-full bg-white p-6 rounded-xl shadow-lg border border-gray-100">

                        {/* ================= STEP 1: ì„ëŒ€ì¸ & ê³„ì•½ ì •ë³´ ================= */}
                        {step === 1 && (
                            <div className="space-y-4">
                                <h2 className="text-xl font-bold text-gray-800 border-b pb-3">1. ì„ëŒ€ì¸ ë° ë¶€ë™ì‚° ì •ë³´</h2>
                                
                                <div className="space-y-3">
                                    <div>
                                        <label className="text-xs font-bold text-gray-500">ì†Œì¬ì§€ (ì£¼ì†Œ)</label>
                                        <input type="text" name="address" value={data.address} onChange={handleChange} placeholder="ì˜ˆ: ì„œìš¸ì‹œ ê°•ë‚¨êµ¬..." className="w-full border p-3 rounded bg-gray-50" />
                                    </div>
                                    <div className="flex gap-2">
                                        <div className="w-1/2">
                                            <label className="text-xs font-bold text-gray-500">ê±´ë¬¼ ìš©ë„</label>
                                            <input type="text" name="buildingType" value={data.buildingType} onChange={handleChange} className="w-full border p-3 rounded bg-gray-50" />
                                        </div>
                                        <div className="w-1/2">
                                            <label className="text-xs font-bold text-gray-500">ë©´ì  (ã¡)</label>
                                            <input type="number" name="area" value={data.area} onChange={handleChange} placeholder="84" className="w-full border p-3 rounded bg-gray-50" />
                                        </div>
                                    </div>
                                </div>

                                <div className="bg-blue-50 p-4 rounded-lg space-y-2 border border-blue-100">
                                    <div className="text-sm font-bold text-blue-700 mb-2">ê³„ì•½ ê¸ˆì•¡ ì¡°ê±´</div>
                                    <input type="text" name="deposit" value={data.deposit} onChange={handleChange} placeholder="ë³´ì¦ê¸ˆ (ì›)" className="w-full border p-2 rounded" />
                                    <input type="text" name="contractMoney" value={data.contractMoney} onChange={handleChange} placeholder="ê³„ì•½ê¸ˆ (ì›)" className="w-full border p-2 rounded" />
                                    <div className="flex gap-2">
                                        <input type="text" name="rent" value={data.rent} onChange={handleChange} placeholder="ì›”ì„¸" className="w-full border p-2 rounded" />
                                        <input type="text" name="payDate" value={data.payDate} onChange={handleChange} placeholder="ë‚©ë¶€ì¼" className="w-full border p-2 rounded" />
                                    </div>
                                    <div className="flex items-center gap-2 text-sm text-gray-600">
                                        <input type="date" name="startDate" value={data.startDate} onChange={handleChange} className="border p-2 rounded w-1/2" />
                                        ~
                                        <input type="date" name="endDate" value={data.endDate} onChange={handleChange} className="border p-2 rounded w-1/2" />
                                    </div>
                                </div>

                                <div className="space-y-2 pt-2">
                                    <label className="text-xs font-bold text-gray-500">ì„ëŒ€ì¸(ì£¼ì¸) ì •ë³´</label>
                                    <input type="text" name="lessorName" value={data.lessorName} onChange={handleChange} placeholder="ì„±ëª…" className="w-full border p-3 rounded" />
                                    <input type="text" name="lessorId" value={data.lessorId} onChange={handleChange} placeholder="ì£¼ë¯¼ë²ˆí˜¸ (ì•ìë¦¬)" className="w-full border p-3 rounded" />
                                    <input type="text" name="lessorPhone" value={data.lessorPhone} onChange={handleChange} placeholder="ì—°ë½ì²˜" className="w-full border p-3 rounded" />
                                    <input type="text" name="lessorAddress" value={data.lessorAddress} onChange={handleChange} placeholder="ê±°ì£¼ì§€ ì£¼ì†Œ" className="w-full border p-3 rounded" />
                                    
                                    <div className="flex gap-2 mt-2">
                                        <select name="bankName" value={data.bankName} onChange={handleChange} className="border p-3 rounded w-1/3">
                                            {BANK_LIST.map(bank => <option key={bank} value={bank}>{bank}</option>)}
                                        </select>
                                        <input type="text" name="accountNum" value={data.accountNum} onChange={handleChange} placeholder="ê³„ì¢Œë²ˆí˜¸ ì…ë ¥" className="border p-3 rounded w-2/3" />
                                    </div>
                                </div>

                                <button onClick={goNext} className="btn-common btn-next btn-full">ë‹¤ìŒ ë‹¨ê³„ë¡œ</button>
                            </div>
                        )}


                        {/* ================= STEP 2: ì„ì°¨ì¸ ì •ë³´ ================= */}
                        {step === 2 && (
                            <div className="space-y-4">
                                <h2 className="text-xl font-bold text-gray-800 border-b pb-3">2. ì„ì°¨ì¸(ì„¸ì…ì) ì •ë³´</h2>
                                <p className="text-sm text-gray-500">ì—¬ê¸°ì— ì…ë ¥í•˜ë©´ ê³„ì•½ì„œì— ìë™ìœ¼ë¡œ ì±„ì›Œì§‘ë‹ˆë‹¤.</p>

                                <div className="space-y-3">
                                    <div>
                                        <label className="text-xs font-bold text-gray-500">ì„ì°¨ì¸ ì„±ëª…</label>
                                        <input type="text" name="lesseeName" value={data.lesseeName} onChange={handleChange} placeholder="ì˜ˆ: í™ê¸¸ë™" className="w-full border p-3 rounded bg-gray-50" />
                                    </div>
                                    <div>
                                        <label className="text-xs font-bold text-gray-500">ì—°ë½ì²˜</label>
                                        <input type="text" name="lesseePhone" value={data.lesseePhone} onChange={handleChange} placeholder="010-0000-0000" className="w-full border p-3 rounded bg-gray-50" />
                                    </div>
                                    <div>
                                        <label className="text-xs font-bold text-gray-500">ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸</label>
                                        <input type="text" name="lesseeId" value={data.lesseeId} onChange={handleChange} placeholder="ì£¼ë¯¼ë²ˆí˜¸ ì „ì²´" className="w-full border p-3 rounded bg-gray-50" />
                                    </div>
                                    <div>
                                        <label className="text-xs font-bold text-gray-500">í˜„ ê±°ì£¼ì§€ ì£¼ì†Œ</label>
                                        <input type="text" name="lesseeAddress" value={data.lesseeAddress} onChange={handleChange} placeholder="ë„ë¡œëª… ì£¼ì†Œ ì…ë ¥" className="w-full border p-3 rounded bg-gray-50" />
                                    </div>
                                </div>

                                <div className="flex justify-between gap-3 pt-4">
                                    <button onClick={goBack} className="btn-common btn-prev">ì´ì „</button>
                                    <button onClick={goNext} className="btn-common btn-next">ë‹¤ìŒ (ë¯¸ë¦¬ë³´ê¸°)</button>
                                </div>
                            </div>
                        )}


                        {/* ================= STEP 3: ë¯¸ë¦¬ë³´ê¸° (ìˆ˜ì • ê°€ëŠ¥) ================= */}
                        {step === 3 && (
                            <div className="flex flex-col h-full">
                                <h2 className="text-xl font-bold text-gray-800 mb-2">3. ê³„ì•½ì„œ ë‚´ìš© í™•ì¸</h2>
                                <p className="text-sm text-gray-500 mb-4">ì…ë ¥í•˜ì‹  ë‚´ìš©ì´ ë§ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”. (ìˆ˜ì • ê°€ëŠ¥)</p>
                                
                                {/* ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•œ ë¯¸ë¦¬ë³´ê¸° ì˜ì—­ */}
                                <div className="overflow-y-auto border rounded bg-gray-200 p-2 mb-4" style={{maxHeight: '400px'}}>
                                    <div ref={contractRef} className="contract-paper transform scale-[0.6] origin-top-left" style={{width: '210mm', height: 'auto', marginBottom: '-120mm'}}>
                                        <h1 className="title">ë¶€ë™ì‚° ì„ëŒ€ì°¨ ê³„ì•½ì„œ</h1>
                                        
                                        <div className="sub-title">1. ë¶€ë™ì‚°ì˜ í‘œì‹œ</div>
                                        <table className="c-table">
                                            <tbody>
                                                <tr><th>ì†Œì¬ì§€</th><td colSpan="3">{data.address}</td></tr>
                                                <tr>
                                                    <th>ê±´ë¬¼ìš©ë„</th><td>{data.buildingType}</td>
                                                    <th>ë©´ì </th><td>{data.area} ã¡</td>
                                                </tr>
                                            </tbody>
                                        </table>

                                        <div className="sub-title">2. ê³„ì•½ ë‚´ìš©</div>
                                        <table className="c-table">
                                            <tbody>
                                                <tr><th>ë³´ì¦ê¸ˆ</th><td colSpan="3">ê¸ˆ {data.deposit} ì›</td></tr>
                                                <tr><th>ê³„ì•½ê¸ˆ</th><td colSpan="3">ê¸ˆ {data.contractMoney} ì› (ê³„ì•½ ì‹œ ì§€ë¶ˆ)</td></tr>
                                                <tr><th>ì°¨ì„(ì›”ì„¸)</th><td colSpan="3">ê¸ˆ {data.rent} ì› ({data.payDate})</td></tr>
                                                <tr><th>ì„ëŒ€ì°¨ê¸°ê°„</th><td colSpan="3">{data.startDate} ë¶€í„° {data.endDate} ê¹Œì§€</td></tr>
                                            </tbody>
                                        </table>

                                        <div className="sub-title">3. ê³„ì•½ ì¡°í•­</div>
                                        <div style={{fontSize: '11px', textAlign: 'justify', border: '1px solid #ddd', padding: '10px'}}>
                                            ì œ2ì¡° (ì¡´ì†ê¸°ê°„) ì„ëŒ€ì¸ì€ ì„ëŒ€ì°¨ê¸°ê°„ ë§Œë£Œ ì „ 6ì›”ë¶€í„° 1ì›”ê¹Œì§€ ì‚¬ì´ì— ê°±ì‹ ê±°ì ˆì˜ í†µì§€ë¥¼ í•˜ì§€ ì•„ë‹ˆí•œ ê²½ìš° ë¬µì‹œì  ê°±ì‹ ëœ ê²ƒìœ¼ë¡œ ë³¸ë‹¤.<br/>
                                            ì œ3ì¡° (ìš©ë„ë³€ê²½ ë° ì „ëŒ€ ë“±) ì„ì°¨ì¸ì€ ì„ëŒ€ì¸ì˜ ë™ì˜ ì—†ì´ ìš©ë„ë‚˜ êµ¬ì¡°ë¥¼ ë³€ê²½í•˜ê±°ë‚˜ ì „ëŒ€í•  ìˆ˜ ì—†ë‹¤.<br/>
                                            ì œ4ì¡° (ê³„ì•½ì˜ í•´ì§€) ì°¨ì„ì„ 2ê¸° ì´ìƒ ì—°ì²´í•˜ê±°ë‚˜ ì œ3ì¡°ë¥¼ ìœ„ë°˜í•œ ê²½ìš° ê³„ì•½ì„ í•´ì§€í•  ìˆ˜ ìˆë‹¤.<br/>
                                            ì œ5ì¡° (ê³„ì•½ì˜ ì¢…ë£Œ) ê³„ì•½ ì¢…ë£Œ ì‹œ ì„ì°¨ì¸ì€ ë¶€ë™ì‚°ì„ ì›ìƒìœ¼ë¡œ íšŒë³µí•˜ì—¬ ë°˜í™˜í•œë‹¤.<br/>
                                            ì œ6ì¡° (íŠ¹ì•½) ë³¸ ê³„ì•½ì€ ë¹„ëŒ€ë©´ ì „ìê³„ì•½ìœ¼ë¡œ ì²´ê²°í•œë‹¤.
                                        </div>

                                        <div className="sub-title">4. ì„œëª… ë° ê³„ì¢Œ</div>
                                        <div className="sign-section">
                                            <div className="sign-box">
                                                <div className="sign-header">[ì„ëŒ€ì¸]</div>
                                                <div className="sign-row"><span className="sign-label">ì£¼ì†Œ</span><span className="sign-value">{data.lessorAddress}</span></div>
                                                <div className="sign-row"><span className="sign-label">ì£¼ë¯¼ë²ˆí˜¸</span><span className="sign-value">{data.lessorId}</span></div>
                                                <div className="sign-row"><span className="sign-label">ì „í™”</span><span className="sign-value">{data.lessorPhone}</span></div>
                                                <div className="sign-row"><span className="sign-label">ì„±ëª…</span><span className="sign-value">{data.lessorName} (ì¸)</span></div>
                                                <div className="sign-row" style={{marginTop:'5px', backgroundColor:'#f9f9f9'}}>
                                                    <span className="sign-label">ì…ê¸ˆê³„ì¢Œ</span>
                                                    <span style={{fontWeight:'bold'}}>{data.bankName} {data.accountNum}</span>
                                                </div>
                                            </div>
                                            <div className="sign-box">
                                                <div className="sign-header">[ì„ì°¨ì¸]</div>
                                                <div className="sign-row"><span className="sign-label">ì£¼ì†Œ</span><span className="sign-value">{data.lesseeAddress}</span></div>
                                                <div className="sign-row"><span className="sign-label">ì£¼ë¯¼ë²ˆí˜¸</span><span className="sign-value">{data.lesseeId}</span></div>
                                                <div className="sign-row"><span className="sign-label">ì „í™”</span><span className="sign-value">{data.lesseePhone}</span></div>
                                                <div className="sign-row"><span className="sign-label">ì„±ëª…</span><span className="sign-value">{data.lesseeName} (ì¸)</span></div>
                                            </div>
                                        </div>
                                        <div style={{textAlign:'center', marginTop:'30px', fontSize:'12px'}}>ì‘ì„±ì¼: {new Date().toLocaleDateString()}</div>
                                    </div>
                                </div>

                                <div className="flex justify-between gap-3">
                                    <button onClick={goBack} className="btn-common btn-prev">ìˆ˜ì •í•˜ê¸°</button>
                                    <button onClick={goNext} className="btn-common btn-next">í™•ì¸ ì™„ë£Œ (ê²°ì œ)</button>
                                </div>
                            </div>
                        )}


                        {/* ================= STEP 4: ê²°ì œ (ê´€ë¦¬ì ëª¨ë“œ) ================= */}
                        {step === 4 && (
                            <div className="text-center py-4">
                                <h2 className="text-xl font-bold text-gray-800 mb-6">4. ìˆ˜ìˆ˜ë£Œ ê²°ì œ</h2>
                                
                                {/* ì¹´ë“œ / í˜„ê¸ˆ ì„ íƒ */}
                                <div className="grid grid-cols-2 gap-4 mb-6">
                                    <button 
                                        onClick={() => setPayStatus('cash_check')}
                                        className={`p-6 border-2 rounded-xl flex flex-col items-center justify-center transition ${payStatus === 'cash_check' ? 'border-blue-600 bg-blue-50 text-blue-700' : 'hover:border-blue-300'}`}
                                    >
                                        <span className="text-3xl mb-2">ğŸ¦</span>
                                        <span className="font-bold">ë¬´í†µì¥ ì…ê¸ˆ</span>
                                    </button>
                                    
                                    <button 
                                        onClick={() => setPayStatus('card_sent')}
                                        className={`p-6 border-2 rounded-xl flex flex-col items-center justify-center transition ${payStatus === 'card_sent' ? 'border-blue-600 bg-blue-50 text-blue-700' : 'hover:border-blue-300'}`}
                                    >
                                        <span className="text-3xl mb-2">ğŸ’³</span>
                                        <span className="font-bold">ì¹´ë“œ ê²°ì œ</span>
                                    </button>
                                </div>

                                {/* ì„ íƒì— ë”°ë¥¸ ì•ˆë‚´ ë©”ì‹œì§€ (ê´€ë¦¬ì í™•ì¸ìš©) */}
                                {payStatus === 'cash_check' && (
                                    <div className="bg-gray-100 p-4 rounded text-left text-sm text-gray-700 mb-6 animate-pulse">
                                        <p><strong>[ì…ê¸ˆ ê³„ì¢Œ]</strong> ìš°ë¦¬ì€í–‰ 1002-XXX-XXXXXX</p>
                                        <p className="mt-1">ê´€ë¦¬ì í™•ì¸ í›„ ì§„í–‰í•©ë‹ˆë‹¤.</p>
                                    </div>
                                )}
                                {payStatus === 'card_sent' && (
                                    <div className="bg-yellow-50 p-4 rounded text-left text-sm text-yellow-800 mb-6 animate-pulse">
                                        <p><strong>[ë°œì†¡ ì™„ë£Œ]</strong> ê³ ê°ë‹˜ íœ´ëŒ€í°ìœ¼ë¡œ ê²°ì œ ë§í¬ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.</p>
                                        <p className="mt-1">ê²°ì œ ë‚´ì—­ í™•ì¸ í›„ ì§„í–‰í•©ë‹ˆë‹¤.</p>
                                    </div>
                                )}

                                <div className="flex justify-between gap-3">
                                    <button onClick={goBack} className="btn-common btn-prev">ë’¤ë¡œ</button>
                                    {/* ê²°ì œ ë°©ì‹ ì„ íƒí•´ì•¼ ë‹¤ìŒ ë²„íŠ¼ í™œì„±í™” */}
                                    {payStatus !== 'pending' ? (
                                        <button onClick={goNext} className="btn-common btn-next">ê²°ì œ í™•ì¸ë¨ (ë‹¤ìŒ)</button>
                                    ) : (
                                        <button disabled className="btn-common bg-gray-300 text-white cursor-not-allowed" style={{width: '68%'}}>ê²°ì œ ìˆ˜ë‹¨ì„ ì„ íƒí•˜ì„¸ìš”</button>
                                    )}
                                </div>
                            </div>
                        )}


                        {/* ================= STEP 5: ìµœì¢… ë‹¤ìš´ë¡œë“œ ================= */}
                        {step === 5 && (
                            <div className="text-center py-10">
                                <div className="text-6xl mb-4">âœ…</div>
                                <h2 className="text-2xl font-bold text-gray-800 mb-2">ê³„ì•½ì„œ ìƒì„± ì™„ë£Œ!</h2>
                                <p className="text-gray-600 mb-8">ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ PDF íŒŒì¼ì„ ì €ì¥í•˜ì„¸ìš”.</p>
                                
                                <button onClick={handleDownload} className="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-5 rounded-lg shadow-lg text-lg flex items-center justify-center gap-2">
                                    ğŸ“„ PDF ê³„ì•½ì„œ ë‹¤ìš´ë¡œë“œ
                                </button>
                                
                                <button onClick={() => window.location.reload()} className="mt-6 text-gray-400 underline text-sm">
                                    ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°
                                </button>
                            </div>
                        )}

                    </div>

                    {/* PDF ìƒì„±ìš© (í™”ë©´ ë°– ìˆ¨ê¹€) */}
                    <div ref={contractRef} className="contract-paper hidden-screen">
                        {/* ì´ ì•ˆì˜ ë‚´ìš©ì€ ìœ„ ë¯¸ë¦¬ë³´ê¸°ì™€ ë™ì¼í•˜ê²Œ ë Œë”ë§ ë©ë‹ˆë‹¤ (ìƒëµí•˜ì§€ ì•Šê³  ìƒíƒœê°’ ê·¸ëŒ€ë¡œ ì‚¬ìš©) */}
                        <h1 className="title">ë¶€ë™ì‚° ì„ëŒ€ì°¨ ê³„ì•½ì„œ</h1>
                        <div className="sub-title">1. ë¶€ë™ì‚°ì˜ í‘œì‹œ</div>
                        <table className="c-table">
                            <tbody>
                                <tr><th>ì†Œì¬ì§€</th><td colSpan="3">{data.address}</td></tr>
                                <tr><th>ìš©ë„</th><td>{data.buildingType}</td><th>ë©´ì </th><td>{data.area} ã¡</td></tr>
                            </tbody>
                        </table>
                        <div className="sub-title">2. ê³„ì•½ ë‚´ìš©</div>
                        <table className="c-table">
                            <tbody>
                                <tr><th>ë³´ì¦ê¸ˆ</th><td colSpan="3">ê¸ˆ {data.deposit} ì›</td></tr>
                                <tr><th>ê³„ì•½ê¸ˆ</th><td colSpan="3">ê¸ˆ {data.contractMoney} ì›</td></tr>
                                <tr><th>ì°¨ì„(ì›”ì„¸)</th><td colSpan="3">ê¸ˆ {data.rent} ì› ({data.payDate})</td></tr>
                                <tr><th>ì„ëŒ€ì°¨ê¸°ê°„</th><td colSpan="3">{data.startDate} ë¶€í„° {data.endDate} ê¹Œì§€</td></tr>
                            </tbody>
                        </table>
                        <div className="sub-title">3. ê³„ì•½ ì¡°í•­</div>
                        <div className="clause-box" style={{fontSize: '12px', border: '1px solid #000', padding: '10px', textAlign:'justify'}}>
                            ì œ2ì¡° (ì¡´ì†ê¸°ê°„) ì„ëŒ€ì¸ì€ ì„ëŒ€ì°¨ê¸°ê°„ ë§Œë£Œ ì „ 6ì›”ë¶€í„° 1ì›”ê¹Œì§€ ì‚¬ì´ì— ê°±ì‹ ê±°ì ˆì˜ í†µì§€ë¥¼ í•˜ì§€ ì•„ë‹ˆí•œ ê²½ìš° ë¬µì‹œì  ê°±ì‹ ëœ ê²ƒìœ¼ë¡œ ë³¸ë‹¤.<br/>
                            ì œ3ì¡° (ìš©ë„ë³€ê²½ ë° ì „ëŒ€ ë“±) ì„ì°¨ì¸ì€ ì„ëŒ€ì¸ì˜ ë™ì˜ ì—†ì´ ìš©ë„ë‚˜ êµ¬ì¡°ë¥¼ ë³€ê²½í•˜ê±°ë‚˜ ì „ëŒ€í•  ìˆ˜ ì—†ë‹¤.<br/>
                            ì œ4ì¡° (ê³„ì•½ì˜ í•´ì§€) ì°¨ì„ì„ 2ê¸° ì´ìƒ ì—°ì²´í•˜ê±°ë‚˜ ì œ3ì¡°ë¥¼ ìœ„ë°˜í•œ ê²½ìš° ê³„ì•½ì„ í•´ì§€í•  ìˆ˜ ìˆë‹¤.<br/>
                            ì œ5ì¡° (ê³„ì•½ì˜ ì¢…ë£Œ) ê³„ì•½ ì¢…ë£Œ ì‹œ ì„ì°¨ì¸ì€ ë¶€ë™ì‚°ì„ ì›ìƒìœ¼ë¡œ íšŒë³µí•˜ì—¬ ë°˜í™˜í•œë‹¤.<br/>
                            ì œ6ì¡° (íŠ¹ì•½) ë³¸ ê³„ì•½ì€ ë¹„ëŒ€ë©´ ì „ìê³„ì•½ìœ¼ë¡œ ì²´ê²°í•œë‹¤.
                        </div>
                        <div className="sub-title">4. ì„œëª… ë° ê³„ì¢Œ</div>
                        <div className="sign-section">
                            <div className="sign-box">
                                <div className="sign-header">[ì„ëŒ€ì¸]</div>
                                <div className="sign-row"><span className="sign-label">ì£¼ì†Œ</span><span className="sign-value">{data.lessorAddress}</span></div>
                                <div className="sign-row"><span className="sign-label">ì£¼ë¯¼ë²ˆí˜¸</span><span className="sign-value">{data.lessorId}</span></div>
                                <div className="sign-row"><span className="sign-label">ì „í™”</span><span className="sign-value">{data.lessorPhone}</span></div>
                                <div className="sign-row"><span className="sign-label">ì„±ëª…</span><span className="sign-value">{data.lessorName} (ì¸)</span></div>
                                <div className="sign-row" style={{marginTop:'5px'}}><span className="sign-label">ê³„ì¢Œ</span><span className="sign-value" style={{fontWeight:'bold'}}>{data.bankName} {data.accountNum}</span></div>
                            </div>
                            <div className="sign-box">
                                <div className="sign-header">[ì„ì°¨ì¸]</div>
                                <div className="sign-row"><span className="sign-label">ì£¼ì†Œ</span><span className="sign-value">{data.lesseeAddress}</span></div>
                                <div className="sign-row"><span className="sign-label">ì£¼ë¯¼ë²ˆí˜¸</span><span className="sign-value">{data.lesseeId}</span></div>
                                <div className="sign-row"><span className="sign-label">ì „í™”</span><span className="sign-value">{data.lesseePhone}</span></div>
                                <div className="sign-row"><span className="sign-label">ì„±ëª…</span><span className="sign-value">{data.lesseeName} (ì¸)</span></div>
                            </div>
                        </div>
                        <div style={{textAlign:'center', marginTop:'50px'}}>ì‘ì„±ì¼: {new Date().toLocaleDateString()}</div>
                    </div>

                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
