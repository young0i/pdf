<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¹„ëŒ€ë©´ ì „ìê³„ì•½ ì‹œìŠ¤í…œ</title>
    
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;700&family=Noto+Sans+KR:wght@400;700&display=swap');
        
        body { background-color: #f3f4f6; font-family: 'Noto Sans KR', sans-serif; }
        
        /* ì‹¤ì œ ê³„ì•½ì„œ ì¢…ì´ ëŠë‚Œ (A4 ë¹„ìœ¨) */
        .contract-paper {
            font-family: 'Noto Serif KR', serif; /* ëª…ì¡°ì²´ */
            width: 210mm;
            min-height: 297mm;
            padding: 20mm;
            background: white;
            color: #333;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
            margin: 0 auto;
            position: relative;
            box-sizing: border-box;
        }

        /* ê³„ì•½ì„œ ë‚´ë¶€ í…Œì´ë¸” ìŠ¤íƒ€ì¼ */
        .contract-table { width: 100%; border-collapse: collapse; margin-bottom: 15px; font-size: 13px; }
        .contract-table th, .contract-table td { border: 1px solid #444; padding: 6px 10px; }
        .contract-table th { background-color: #f0f0f0; text-align: center; font-weight: bold; width: 100px; }
        
        .title { text-align: center; font-size: 28px; font-weight: bold; margin-bottom: 30px; text-decoration: underline; text-underline-offset: 5px; }
        .section-title { font-size: 16px; font-weight: bold; margin-bottom: 5px; margin-top: 15px; }
        
        /* ì¸ì ì‚¬í•­ ì„œëª…ë€ */
        .sign-box { display: flex; justify-content: space-between; margin-top: 30px; }
        .party-box { width: 48%; }
        .party-row { display: flex; margin-bottom: 5px; font-size: 13px; }
        .party-label { width: 60px; font-weight: bold; }
        
        /* ìˆ¨ê¹€ ì²˜ë¦¬ (PDF ìƒì„±ìš©) */
        .hidden-screen { position: absolute; left: -9999px; top: -9999px; }
    </style>
</head>
<body>

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef } = React;
        const { jsPDF } = window.jspdf;

        function App() {
            const [step, setStep] = useState(1); // 1:ì…ë ¥ -> 2:ê²°ì œ -> 3:ì™„ë£Œ
            const [payMethod, setPayMethod] = useState(null);
            const contractRef = useRef(null);

            // ì…ë ¥ ë°ì´í„° ìƒíƒœ
            const [formData, setFormData] = useState({
                address: "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123, 101ë™ 202í˜¸",
                type: "ì•„íŒŒíŠ¸",
                area: "84.5",
                deposit: "500,000,000",
                contractVal: "50,000,000",
                rent: "0",
                startDate: "2023-12-01",
                endDate: "2025-11-30",
                payDate: "2023-11-30",
                lessorName: "ê¹€ì„ëŒ€",
                lessorPhone: "010-1111-2222",
                lessorId: "700101-1******",
                lesseeName: "",
                lesseePhone: "",
                lesseeId: ""
            });

            const handleChange = (e) => {
                const { name, value } = e.target;
                setFormData({ ...formData, [name]: value });
            };

            // PDF ìƒì„± ë° ë‹¤ìš´ë¡œë“œ í•¨ìˆ˜
            const generatePDF = async () => {
                const element = contractRef.current;
                
                // PDF ìƒì„± ì¤‘ì—” í™”ë©´ì— ë³´ì´ê²Œ ì ê¹ ì²˜ë¦¬ (hidden í´ë˜ìŠ¤ ì œê±° íš¨ê³¼)
                element.style.position = 'relative';
                element.style.left = '0';
                
                const canvas = await html2canvas(element, { scale: 2 });
                const imgData = canvas.toDataURL('image/png');
                
                const pdf = new jsPDF('p', 'mm', 'a4');
                const pdfWidth = pdf.internal.pageSize.getWidth();
                const pdfHeight = (canvas.height * pdfWidth) / canvas.width;
                
                pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
                pdf.save(`${formData.lesseeName}_ì„ëŒ€ì°¨ê³„ì•½ì„œ.pdf`);

                // ë‹¤ì‹œ ìˆ¨ê¹€
                element.style.position = 'absolute';
                element.style.left = '-9999px';
            };

            const handleCardRequest = () => {
                alert(`[ì•Œë¦¼] ${formData.lesseePhone} ë²ˆí˜¸ë¡œ\nì¹´ë“œ ê²°ì œ ë§í¬(PGì‚¬)ê°€ ë¬¸ìë¡œ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.\n\nê²°ì œê°€ í™•ì¸ë˜ë©´ ë‹¤ìŒ ë‹¨ê³„ë¡œ ì§„í–‰ë©ë‹ˆë‹¤.`);
                // ì‹¤ì œë¡œëŠ” ì—¬ê¸°ì„œ ë°±ì—”ë“œ API í˜¸ì¶œ -> ë¬¸ì ë°œì†¡ ë¡œì§
                setStep(3); // ì‹œë®¬ë ˆì´ì…˜ì„ ìœ„í•´ ë°”ë¡œ ì™„ë£Œ ë‹¨ê³„ë¡œ ì´ë™
            };

            return (
                <div className="min-h-screen flex flex-col items-center py-10">
                    
                    {/* ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ */}
                    <div className="w-full max-w-2xl bg-white p-6 rounded-xl shadow-lg mb-8">
                        <div className="flex justify-between mb-4 border-b pb-4">
                            <h2 className="text-2xl font-bold text-gray-800">ğŸ  ë¹„ëŒ€ë©´ ì „ìê³„ì•½ ì‘ì„±</h2>
                            <span className="text-blue-600 font-bold self-center">
                                {step === 1 ? "1. ì •ë³´ì…ë ¥" : step === 2 ? "2. ìˆ˜ìˆ˜ë£Œ ê²°ì œ" : "3. ê³„ì•½ì„œ ìƒì„±"}
                            </span>
                        </div>

                        {/* STEP 1: ì •ë³´ ì…ë ¥ í¼ */}
                        {step === 1 && (
                            <div className="space-y-4">
                                <div className="bg-blue-50 p-4 rounded-lg text-sm text-blue-700 mb-4">
                                    ğŸ’¡ ê³„ì•½ì— í•„ìš”í•œ ìµœì†Œí•œì˜ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.<br/>ë‚˜ë¨¸ì§€ ë²•ì  ì¡°í•­ì€ í‘œì¤€ ì–‘ì‹ìœ¼ë¡œ ìë™ ìƒì„±ë©ë‹ˆë‹¤.
                                </div>
                                
                                <div className="grid grid-cols-1 gap-4">
                                    <div>
                                        <label className="block text-sm font-bold text-gray-700 mb-1">ì„ì°¨ì¸ ì„±ëª… (ë³¸ì¸)</label>
                                        <input type="text" name="lesseeName" value={formData.lesseeName} onChange={handleChange} placeholder="ì˜ˆ: í™ê¸¸ë™" className="w-full border p-3 rounded-lg focus:outline-blue-500" />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-bold text-gray-700 mb-1">ì—°ë½ì²˜</label>
                                        <input type="text" name="lesseePhone" value={formData.lesseePhone} onChange={handleChange} placeholder="ì˜ˆ: 010-1234-5678" className="w-full border p-3 rounded-lg focus:outline-blue-500" />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-bold text-gray-700 mb-1">ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸ (ì•ìë¦¬)</label>
                                        <input type="text" name="lesseeId" value={formData.lesseeId} onChange={handleChange} placeholder="ì˜ˆ: 900101" className="w-full border p-3 rounded-lg focus:outline-blue-500" />
                                    </div>
                                    
                                    <div className="border-t pt-4 mt-2">
                                        <p className="text-sm font-bold text-gray-500 mb-2">ê³„ì•½ ë¶€ë™ì‚° ì •ë³´ (í™•ì¸ìš©)</p>
                                        <input type="text" value={formData.address} disabled className="w-full bg-gray-100 border p-3 rounded-lg text-gray-500" />
                                    </div>
                                </div>

                                <button onClick={() => {
                                    if(!formData.lesseeName) return alert('ì„±ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”');
                                    setStep(2);
                                }} className="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-lg mt-6 text-lg transition">
                                    ì…ë ¥ ì™„ë£Œ ë° ê²°ì œí•˜ê¸°
                                </button>
                            </div>
                        )}

                        {/* STEP 2: ê²°ì œ ì„ íƒ */}
                        {step === 2 && (
                            <div className="text-center">
                                <h3 className="text-xl font-bold mb-2">ê³„ì•½ì„œ ì‘ì„± ìˆ˜ìˆ˜ë£Œ ê²°ì œ</h3>
                                <p className="text-gray-500 mb-8">ê²°ì œê°€ ì™„ë£Œë˜ë©´ ì „ìê³„ì•½ì„œ(PDF)ê°€ ì¦‰ì‹œ ë°œí–‰ë©ë‹ˆë‹¤.</p>
                                
                                <div className="grid grid-cols-2 gap-4">
                                    <button onClick={() => setPayMethod('cash')} className={`p-6 border-2 rounded-xl flex flex-col items-center justify-center transition ${payMethod === 'cash' ? 'border-blue-500 bg-blue-50 text-blue-700' : 'border-gray-200 hover:border-blue-300'}`}>
                                        <span className="text-3xl mb-2">ğŸ¦</span>
                                        <span className="font-bold">í˜„ê¸ˆ ì´ì²´</span>
                                    </button>
                                    <button onClick={() => setPayMethod('card')} className={`p-6 border-2 rounded-xl flex flex-col items-center justify-center transition ${payMethod === 'card' ? 'border-blue-500 bg-blue-50 text-blue-700' : 'border-gray-200 hover:border-blue-300'}`}>
                                        <span className="text-3xl mb-2">ğŸ’³</span>
                                        <span className="font-bold">ì¹´ë“œ ê²°ì œ</span>
                                    </button>
                                </div>

                                {/* í˜„ê¸ˆ ì„ íƒ ì‹œ */}
                                {payMethod === 'cash' && (
                                    <div className="mt-6 bg-gray-100 p-4 rounded-lg text-left">
                                        <p className="font-bold text-gray-800">ì…ê¸ˆ ê³„ì¢Œ ì•ˆë‚´</p>
                                        <p className="text-gray-600 mt-1">ìš°ë¦¬ì€í–‰ 1002-123-456789 (ì˜ˆê¸ˆì£¼: ì „ìê³„ì•½)</p>
                                        <button onClick={() => setStep(3)} className="w-full mt-4 bg-blue-600 text-white font-bold py-3 rounded-lg">ì…ê¸ˆ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤</button>
                                    </div>
                                )}

                                {/* ì¹´ë“œ ì„ íƒ ì‹œ */}
                                {payMethod === 'card' && (
                                    <div className="mt-6">
                                        <button onClick={handleCardRequest} className="w-full bg-yellow-400 hover:bg-yellow-500 text-black font-bold py-3 rounded-lg shadow-md transition">
                                            ğŸ“² ì•Œë¦¼í†¡ìœ¼ë¡œ ê²°ì œ ë§í¬ ë°›ê¸°
                                        </button>
                                        <p className="text-xs text-gray-400 mt-2">* ë¬¸ìë¡œ ì „ì†¡ëœ ë§í¬ë¥¼ í†µí•´ ê²°ì œë¥¼ ì§„í–‰í•´ì£¼ì„¸ìš”.</p>
                                    </div>
                                )}
                            </div>
                        )}

                        {/* STEP 3: ì™„ë£Œ ë° PDF/ëª¨ë‘ì‹¸ì¸ */}
                        {step === 3 && (
                            <div className="text-center">
                                <div className="text-5xl mb-4">âœ…</div>
                                <h3 className="text-xl font-bold mb-2">ê³„ì•½ì„œ ì‘ì„±ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</h3>
                                <p className="text-gray-600 mb-6">ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ PDFë¥¼ ì €ì¥í•˜ê³ ,<br/>ëª¨ë‘ì‹¸ì¸ì—ì„œ ìµœì¢… ì„œëª…ì„ ì§„í–‰í•˜ì„¸ìš”.</p>
                                
                                <button onClick={generatePDF} className="w-full bg-gray-800 hover:bg-gray-900 text-white font-bold py-4 rounded-lg mb-3 flex items-center justify-center gap-2">
                                    ğŸ“„ ê³„ì•½ì„œ PDF ë‹¤ìš´ë¡œë“œ
                                </button>
                                
                                <a href="https://www.modusign.co.kr/" target="_blank" className="block w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-lg flex items-center justify-center gap-2">
                                    âœï¸ ëª¨ë‘ì‹¸ì¸ìœ¼ë¡œ ì´ë™í•˜ì—¬ ì„œëª…í•˜ê¸°
                                </a>
                                <p className="text-xs text-gray-400 mt-2">* ëª¨ë‘ì‹¸ì¸ ë¡œê·¸ì¸ í›„ ë‹¤ìš´ë¡œë“œ ë°›ì€ PDFë¥¼ ì—…ë¡œë“œí•˜ì„¸ìš”.</p>
                            </div>
                        )}
                    </div>

                    {/* ========================================= */}
                    {/* ì‹¤ì œ PDFë¡œ ë³€í™˜ë  ê³„ì•½ì„œ ì–‘ì‹ (í™”ë©´ì—” ì•ˆë³´ì„) */}
                    {/* ========================================= */}
                    <div ref={contractRef} className="contract-paper hidden-screen">
                        <h1 className="title">ë¶€ë™ì‚° ì„ëŒ€ì°¨ ê³„ì•½ì„œ</h1>
                        
                        <div className="section-title">1. ë¶€ë™ì‚°ì˜ í‘œì‹œ</div>
                        <table className="contract-table">
                            <tbody>
                                <tr>
                                    <th>ì†Œì¬ì§€</th>
                                    <td colSpan="3">{formData.address}</td>
                                </tr>
                                <tr>
                                    <th>í† ì§€</th>
                                    <td>ëŒ€ì§€ê¶Œ ë¹„ìœ¨ í•´ë‹¹ì‚¬í•­ ì—†ìŒ</td>
                                    <th>ê±´ë¬¼</th>
                                    <td>êµ¬ì¡°: {formData.type} / ë©´ì : {formData.area}ã¡</td>
                                </tr>
                            </tbody>
                        </table>

                        <div className="section-title">2. ê³„ì•½ ë‚´ìš©</div>
                        <div className="mb-2 text-sm">ì„ëŒ€ì¸ê³¼ ì„ì°¨ì¸ì€ ì•„ë˜ì™€ ê°™ì´ ì„ëŒ€ì°¨ ê³„ì•½ì„ ì²´ê²°í•œë‹¤.</div>
                        <table className="contract-table">
                            <tbody>
                                <tr>
                                    <th>ë³´ì¦ê¸ˆ</th>
                                    <td colSpan="3">ê¸ˆ {formData.deposit}ì› (ï¿¦{formData.deposit})</td>
                                </tr>
                                <tr>
                                    <th>ê³„ì•½ê¸ˆ</th>
                                    <td colSpan="3">ê¸ˆ {formData.contractVal}ì› ì€ ê³„ì•½ ì‹œì— ì§€ë¶ˆí•˜ê³  ì˜ìˆ˜í•¨.</td>
                                </tr>
                                <tr>
                                    <th>ì°¨ì„(ì›”ì„¸)</th>
                                    <td colSpan="3">ê¸ˆ {formData.rent}ì› (ë§¤ì›” {formData.payDate.split('-')[2]}ì¼ì— ì§€ë¶ˆ)</td>
                                </tr>
                                <tr>
                                    <th>ì„ëŒ€ì°¨ê¸°ê°„</th>
                                    <td colSpan="3">{formData.startDate} ë¶€í„° {formData.endDate} ê¹Œì§€ (24ê°œì›”)</td>
                                </tr>
                            </tbody>
                        </table>

                        <div className="section-title">3. íŠ¹ì•½ ì‚¬í•­</div>
                        <div className="border border-gray-400 p-4 text-sm h-32 mb-4 leading-relaxed">
                            1. í˜„ ì‹œì„¤ ìƒíƒœì—ì„œì˜ ì„ëŒ€ì°¨ ê³„ì•½ì´ë©°, ì„ì°¨ì¸ì€ í˜„ì¥ ë‹µì‚¬ í›„ ê³„ì•½ì„ ì²´ê²°í•¨.<br/>
                            2. ì„ì°¨ì¸ì€ ì„ëŒ€ì¸ì˜ ë™ì˜ ì—†ì´ êµ¬ì¡° ë³€ê²½ ë° ì „ëŒ€í•  ìˆ˜ ì—†ë‹¤.<br/>
                            3. ê¸°íƒ€ ëª…ì‹œë˜ì§€ ì•Šì€ ì‚¬í•­ì€ ì£¼íƒì„ëŒ€ì°¨ë³´í˜¸ë²• ë° ì¼ë°˜ ê´€ë¡€ì— ë”°ë¥¸ë‹¤.<br/>
                            4. ë³¸ ê³„ì•½ì€ ë¹„ëŒ€ë©´ ì „ìê³„ì•½ ë°©ì‹ìœ¼ë¡œ ì§„í–‰ë˜ì—ˆìŒì„ í™•ì¸í•œë‹¤.
                        </div>

                        <div className="section-title">4. ì¸ì  ì‚¬í•­</div>
                        <div className="sign-box">
                            <div className="party-box">
                                <div className="text-center font-bold mb-2 text-lg">[ì„ëŒ€ì¸]</div>
                                <div className="party-row"><span className="party-label">ì£¼ì†Œ</span><span>{formData.address}</span></div>
                                <div className="party-row"><span className="party-label">ì£¼ë¯¼ë²ˆí˜¸</span><span>{formData.lessorId}</span></div>
                                <div className="party-row"><span className="party-label">ì „í™”</span><span>{formData.lessorPhone}</span></div>
                                <div className="party-row"><span className="party-label">ì„±ëª…</span><span>{formData.lessorName} (ì¸)</span></div>
                            </div>
                            <div className="party-box">
                                <div className="text-center font-bold mb-2 text-lg">[ì„ì°¨ì¸]</div>
                                <div className="party-row"><span className="party-label">ì£¼ì†Œ</span><span>ì…ì£¼ ì‹œ í™•ì •</span></div>
                                <div className="party-row"><span className="party-label">ì£¼ë¯¼ë²ˆí˜¸</span><span>{formData.lesseeId}-*******</span></div>
                                <div className="party-row"><span className="party-label">ì „í™”</span><span>{formData.lesseePhone}</span></div>
                                <div className="party-row"><span className="party-label">ì„±ëª…</span><span>{formData.lesseeName} (ì¸)</span></div>
                            </div>
                        </div>
                        
                        <div className="mt-10 text-center text-sm text-gray-500">
                            ë³¸ ê³„ì•½ì„œëŠ” ì „ì ì„œëª…ì„ ìœ„í•´ ì‘ì„±ëœ ì´ˆì•ˆì…ë‹ˆë‹¤.<br/>
                            ì‘ì„±ì¼ì: {new Date().toLocaleDateString()}
                        </div>
                    </div>

                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
