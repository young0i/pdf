<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì „ìê³„ì•½ ì‹œìŠ¤í…œ</title>
    
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&family=Noto+Serif+KR:wght@400;700&display=swap" rel="stylesheet">

    <style>
        /* [í•µì‹¬ ìˆ˜ì •] body ë°°ê²½ìƒ‰ì„ í°ìƒ‰ìœ¼ë¡œ ë³€ê²½ */
        body { 
            background-color: #ffffff; 
            font-family: 'Noto Sans KR', sans-serif; 
            overflow-x: hidden; /* ê°€ë¡œ ìŠ¤í¬ë¡¤ ë°©ì§€ */
        }
        
        /* PDF í…œí”Œë¦¿ ì˜ì—­: í™”ë©´ ë°–ìœ¼ë¡œ ì™„ì „íˆ ì´ë™ (ì´ì „ ìˆ˜ì •ê³¼ ë™ì¼í•˜ê²Œ ìœ ì§€) */
        #pdf-template-layer {
            position: absolute; 
            top: 0;
            left: -5000px; /* í™”ë©´ ë°–ìœ¼ë¡œ ì™„ì „íˆ ì´ë™ */
            width: 210mm; /* A4 ê°€ë¡œ */
            min-height: 297mm; /* A4 ì„¸ë¡œ */
            background: white;
            z-index: -999; 
            padding: 20mm;
            box-sizing: border-box;
            font-family: 'Noto Serif KR', serif;
            color: #000;
        }

        /* ê³„ì•½ì„œ ìŠ¤íƒ€ì¼ (PDF ë‚´ë¶€ìš© - ë³€ë™ ì—†ìŒ) */
        .doc-title { text-align: center; font-size: 24pt; font-weight: bold; margin-bottom: 30px; text-decoration: underline; text-underline-offset: 8px; }
        .doc-section { margin-top: 20px; margin-bottom: 8px; font-weight: bold; font-size: 11pt; border-left: 4px solid #000; padding-left: 8px; }
        .doc-table { width: 100%; border-collapse: collapse; font-size: 10pt; margin-bottom: 15px; }
        .doc-table th, .doc-table td { border: 1px solid #000; padding: 6px 8px; }
        .doc-table th { background-color: #f0f0f0; text-align: center; font-weight: bold; width: 20%; }
        .doc-text { font-size: 10pt; text-align: justify; line-height: 1.6; margin-bottom: 8px; }
        
        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .btn-prev { background-color: #e5e7eb; color: #374151; font-weight: bold; border-radius: 8px; transition: 0.2s; }
        .btn-prev:hover { background-color: #d1d5db; }
        .btn-next { background-color: #2563eb; color: white; font-weight: bold; border-radius: 8px; transition: 0.2s; }
        .btn-next:hover { background-color: #1d4ed8; }
        
        /* ì¸í’‹ ìŠ¤íƒ€ì¼ */
        .input-base { width: 100%; border: 1px solid #d1d5db; padding: 12px; border-radius: 8px; margin-bottom: 10px; outline: none; transition: 0.2s; }
        .input-base:focus { border-color: #2563eb; box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.2); }
    </style>
</head>
<body>

    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;
        const { jsPDF } = window.jspdf;

        const BANK_LIST = [
            "KBêµ­ë¯¼", "ì‹ í•œ", "ìš°ë¦¬", "í•˜ë‚˜", "IBKê¸°ì—…", "NHë†í˜‘", "ì¹´ì¹´ì˜¤ë±…í¬", "í† ìŠ¤ë±…í¬", 
            "ì¼€ì´ë±…í¬", "SCì œì¼", "í•œêµ­ì”¨í‹°", "ìš°ì²´êµ­", "ìƒˆë§ˆì„ê¸ˆê³ ", "ìˆ˜í˜‘", "ì‹ í˜‘", 
            "ì €ì¶•ì€í–‰", "ì‚°ì—…", "ì‚°ë¦¼", "ëŒ€êµ¬", "ë¶€ì‚°", "ê²½ë‚¨", "ê´‘ì£¼", "ì „ë¶", "ì œì£¼"
        ];

        function App() {
            const [step, setStep] = useState(1);
            
            const [data, setData] = useState({
                address: "", buildingType: "ì•„íŒŒíŠ¸", area: "",
                deposit: "", contractMoney: "", rent: "0", payDate: "ë§¤ì›” ë§ì¼", startDate: "", endDate: "",
                lessorName: "", lessorPhone: "", lessorId: "", lessorAddress: "", bankName: "KBêµ­ë¯¼", accountNum: "",
                lesseeName: "", lesseePhone: "", lesseeId: "", lesseeAddress: ""
            });

            const handleChange = (e) => {
                const { name, value } = e.target;
                setData({ ...data, [name]: value });
            };

            const goNext = () => setStep(prev => prev + 1);
            const goBack = () => setStep(prev => prev - 1);

            // PDF ë‹¤ìš´ë¡œë“œ ë¡œì§ (ì´ì „ê³¼ ë™ì¼í•˜ê²Œ ìœ ì§€)
            const handleDownloadPDF = async () => {
                const input = document.getElementById('pdf-template-layer');
                
                try {
                    window.scrollTo(0, 0);
                    const canvas = await html2canvas(input, { 
                        scale: 2, 
                        useCORS: true,
                        scrollY: 0, 
                        windowWidth: 1200 
                    });
                    const imgData = canvas.toDataURL('image/png');
                    
                    const pdf = new jsPDF('p', 'mm', 'a4');
                    const pdfWidth = 210; 
                    const pdfHeight = 297;
                    
                    pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
                    pdf.save(`${data.lesseeName || 'ê³„ì•½ì„œ'}_ì„ëŒ€ì°¨ê³„ì•½ì„œ.pdf`);
                } catch (error) {
                    console.error(error);
                    alert("PDF ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
                }
            };

            const handlePayment = () => goNext();

            return (
                <div className="min-h-screen flex flex-col items-center justify-center py-10 px-4 relative z-10">
                    
                    {/* ë©”ì¸ ì¸í„°í˜ì´ìŠ¤ ì¹´ë“œ (ì´ì „ê³¼ ë™ì¼í•˜ê²Œ ìœ ì§€) */}
                    <div className="bg-white w-full max-w-lg rounded-2xl shadow-xl overflow-hidden relative z-20">
                        
                        <div className="bg-blue-600 p-6 text-center">
                            <h1 className="text-2xl font-bold text-white">ì „ìê³„ì•½ ì‹œìŠ¤í…œ</h1>
                            <p className="text-blue-100 text-sm mt-1">STEP {step} / 5</p>
                        </div>

                        <div className="p-8">
                            
                            {/* STEP 1: ì…ë ¥ í•„ë“œ (ì´ì „ê³¼ ë™ì¼í•˜ê²Œ ìœ ì§€) */}
                            {step === 1 && (
                                <div>
                                    <h2 className="text-xl font-bold text-gray-800 mb-4">1. ë¶€ë™ì‚° ë° ì„ëŒ€ì¸ ì •ë³´</h2>
                                    <input type="text" name="address" value={data.address} onChange={handleChange} placeholder="ì†Œì¬ì§€ (ì£¼ì†Œ)" className="input-base" />
                                    <div className="flex gap-2">
                                        <input type="text" name="buildingType" value={data.buildingType} onChange={handleChange} placeholder="ìš©ë„" className="input-base" />
                                        <input type="number" name="area" value={data.area} onChange={handleChange} placeholder="ë©´ì (ã¡)" className="input-base" />
                                    </div>

                                    <div className="bg-gray-50 p-3 rounded mb-4 border">
                                        <input type="text" name="deposit" value={data.deposit} onChange={handleChange} placeholder="ë³´ì¦ê¸ˆ (ì›)" className="input-base" />
                                        <input type="text" name="contractMoney" value={data.contractMoney} onChange={handleChange} placeholder="ê³„ì•½ê¸ˆ (ì›)" className="input-base" />
                                        <div className="flex gap-2">
                                            <input type="text" name="rent" value={data.rent} onChange={handleChange} placeholder="ì›”ì„¸" className="input-base" />
                                            <input type="text" name="payDate" value={data.payDate} onChange={handleChange} placeholder="ë‚©ë¶€ì¼" className="input-base" />
                                        </div>
                                        <div className="flex gap-2 text-sm items-center">
                                            <input type="date" name="startDate" value={data.startDate} onChange={handleChange} className="input-base" />
                                            ~
                                            <input type="date" name="endDate" value={data.endDate} onChange={handleChange} className="input-base" />
                                        </div>
                                    </div>

                                    <h3 className="text-sm font-bold text-gray-500 mb-2">ì„ëŒ€ì¸(ì£¼ì¸) ì •ë³´</h3>
                                    <input type="text" name="lessorName" value={data.lessorName} onChange={handleChange} placeholder="ì„±ëª…" className="input-base" />
                                    <input type="text" name="lessorPhone" value={data.lessorPhone} onChange={handleChange} placeholder="ì—°ë½ì²˜" className="input-base" />
                                    <input type="text" name="lessorId" value={data.lessorId} onChange={handleChange} placeholder="ì£¼ë¯¼ë²ˆí˜¸ ì•ìë¦¬" className="input-base" />
                                    <input type="text" name="lessorAddress" value={data.lessorAddress} onChange={handleChange} placeholder="ì£¼ì†Œ" className="input-base" />
                                    <div className="flex gap-2">
                                        <select name="bankName" value={data.bankName} onChange={handleChange} className="input-base w-1/3">
                                            {BANK_LIST.map(b => <option key={b} value={b}>{b}</option>)}
                                        </select>
                                        <input type="text" name="accountNum" value={data.accountNum} onChange={handleChange} placeholder="ê³„ì¢Œë²ˆí˜¸" className="input-base w-2/3" />
                                    </div>

                                    <button onClick={goNext} className="btn-next w-full py-4 mt-2">ë‹¤ìŒ ë‹¨ê³„</button>
                                </div>
                            )}

                            {/* STEP 2: ì„ì°¨ì¸ ì •ë³´ (ì´ì „ê³¼ ë™ì¼í•˜ê²Œ ìœ ì§€) */}
                            {step === 2 && (
                                <div>
                                    <h2 className="text-xl font-bold text-gray-800 mb-4">2. ì„ì°¨ì¸ ì •ë³´</h2>
                                    <input type="text" name="lesseeName" value={data.lesseeName} onChange={handleChange} placeholder="ì„±ëª…" className="input-base" />
                                    <input type="text" name="lesseePhone" value={data.lesseePhone} onChange={handleChange} placeholder="ì—°ë½ì²˜" className="input-base" />
                                    <input type="text" name="lesseeId" value={data.lesseeId} onChange={handleChange} placeholder="ì£¼ë¯¼ë²ˆí˜¸" className="input-base" />
                                    <input type="text" name="lesseeAddress" value={data.lesseeAddress} onChange={handleChange} placeholder="í˜„ ê±°ì£¼ì§€ ì£¼ì†Œ" className="input-base" />
                                    <div className="flex gap-3 mt-4">
                                        <button onClick={goBack} className="btn-prev w-1/3 py-3">ì´ì „</button>
                                        <button onClick={goNext} className="btn-next w-2/3 py-3">ê³„ì•½ì„œ í™•ì¸</button>
                                    </div>
                                </div>
                            )}

                            {/* STEP 3: ë¯¸ë¦¬ë³´ê¸° (ì´ì „ê³¼ ë™ì¼í•˜ê²Œ ìœ ì§€) */}
                            {step === 3 && (
                                <div>
                                    <h2 className="text-xl font-bold text-gray-800 mb-2">3. ë‚´ìš© í™•ì¸</h2>
                                    <div className="bg-gray-100 p-4 rounded text-sm text-gray-700 h-64 overflow-y-auto mb-6 border">
                                        <p><strong>[ë¶€ë™ì‚°]</strong> {data.address} ({data.area}ã¡)</p><br/>
                                        <p><strong>[ì¡°ê±´]</strong> ë³´ì¦ê¸ˆ: {data.deposit} / ì›”ì„¸: {data.rent}</p>
                                        <p>ê¸°ê°„: {data.startDate} ~ {data.endDate}</p><br/>
                                        <p><strong>[ì„ëŒ€ì¸]</strong> {data.lessorName} (ê³„ì¢Œ: {data.bankName} {data.accountNum})</p><br/>
                                        <p><strong>[ì„ì°¨ì¸]</strong> {data.lesseeName} / {data.lesseePhone}</p>
                                    </div>
                                    <div className="flex gap-3">
                                        <button onClick={goBack} className="btn-prev w-1/3 py-3">ìˆ˜ì •</button>
                                        <button onClick={goNext} className="btn-next w-2/3 py-3">ë§ìŠµë‹ˆë‹¤ (ê²°ì œ)</button>
                                    </div>
                                </div>
                            )}

                            {/* STEP 4: ê²°ì œ (ì´ì „ê³¼ ë™ì¼í•˜ê²Œ ìœ ì§€) */}
                            {step === 4 && (
                                <div className="text-center">
                                    <h2 className="text-xl font-bold text-gray-800 mb-6">4. ìˆ˜ìˆ˜ë£Œ ê²°ì œ</h2>
                                    <div className="space-y-4 mb-6">
                                        <button onClick={handlePayment} className="w-full p-4 border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 flex items-center justify-center gap-3 transition">
                                            <span className="text-2xl">ğŸ¦</span>
                                            <span className="font-bold text-gray-700">ë¬´í†µì¥ ì…ê¸ˆ í™•ì¸</span>
                                        </button>
                                        <button onClick={handlePayment} className="w-full p-4 border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 flex items-center justify-center gap-3 transition">
                                            <span className="text-2xl">ğŸ’³</span>
                                            <span className="font-bold text-gray-700">ì¹´ë“œ ê²°ì œ ë§í¬ ë°œì†¡</span>
                                        </button>
                                    </div>
                                    <button onClick={goBack} className="text-gray-400 underline text-sm">ë’¤ë¡œ ê°€ê¸°</button>
                                </div>
                            )}

                            {/* STEP 5: ì™„ë£Œ ë° ë‹¤ìš´ë¡œë“œ (ì´ì „ê³¼ ë™ì¼í•˜ê²Œ ìœ ì§€) */}
                            {step === 5 && (
                                <div className="text-center">
                                    <div className="text-5xl mb-4">âœ…</div>
                                    <h2 className="text-2xl font-bold text-gray-800 mb-2">ë°œê¸‰ ì™„ë£Œ!</h2>
                                    <p className="text-gray-500 mb-8">ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ PDFê°€ ì¦‰ì‹œ ë‹¤ìš´ë¡œë“œë©ë‹ˆë‹¤.</p>
                                    <button onClick={handleDownloadPDF} className="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-5 rounded-xl text-lg shadow-lg mb-6">
                                        ğŸ“„ PDF ê³„ì•½ì„œ ë‹¤ìš´ë¡œë“œ
                                    </button>
                                    <button onClick={() => window.location.reload()} className="text-gray-400 underline text-sm">ì²˜ìŒìœ¼ë¡œ</button>
                                </div>
                            )}
                        </div>
                    </div>

                    {/* ======================================================= */}
                    {/* [ìˆ¨ê²¨ì§„ ì›ë³¸] í™”ë©´ ë°–ìœ¼ë¡œ -5000px ì´ë™í•˜ì—¬ ì™„ë²½í•˜ê²Œ ìˆ¨ê¹€ */}
                    {/* ======================================================= */}
                    <div id="pdf-template-layer">
                        <h1 className="doc-title">ë¶€ë™ì‚° ì„ëŒ€ì°¨ ê³„ì•½ì„œ</h1>
                        
                        <div className="doc-section">1. ë¶€ë™ì‚°ì˜ í‘œì‹œ</div>
                        <table className="doc-table">
                            <tbody>
                                <tr><th>ì†Œì¬ì§€</th><td colSpan="3">{data.address}</td></tr>
                                <tr><th>ìš©ë„</th><td>{data.buildingType}</td><th>ë©´ì </th><td>{data.area} ã¡</td></tr>
                            </tbody>
                        </table>

                        <div className="doc-section">2. ê³„ì•½ ë‚´ìš©</div>
                        <div className="doc-text">
                            ì„ëŒ€ì¸ê³¼ ì„ì°¨ì¸ì€ ì•„ë˜ì™€ ê°™ì´ ì„ëŒ€ì°¨ ê³„ì•½ì„ ì²´ê²°í•œë‹¤.
                        </div>
                        <table className="doc-table">
                            <tbody>
                                <tr><th>ë³´ì¦ê¸ˆ</th><td colSpan="3">ê¸ˆ {data.deposit} ì›ì •</td></tr>
                                <tr><th>ê³„ì•½ê¸ˆ</th><td colSpan="3">ê¸ˆ {data.contractMoney} ì›ì • (ê³„ì•½ ì‹œ ì§€ë¶ˆ)</td></tr>
                                <tr><th>ì°¨ì„(ì›”ì„¸)</th><td colSpan="3">ê¸ˆ {data.rent} ì›ì • (ë§¤ì›” {data.payDate.replace(/\D/g, '')}ì¼ í›„ë¶ˆ)</td></tr>
                                <tr><th>ì„ëŒ€ì°¨ê¸°ê°„</th><td colSpan="3">{data.startDate} ë¶€í„° {data.endDate} ê¹Œì§€ (24ê°œì›”)</td></tr>
                            </tbody>
                        </table>

                        <div className="doc-section">3. ê³„ì•½ ì¡°í•­</div>
                        <div className="doc-text" style={{border: '1px solid #ddd', padding: '10px', fontSize: '9pt'}}>
                            <strong>ì œ2ì¡° (ì¡´ì†ê¸°ê°„)</strong> ì„ëŒ€ì¸ì€ ì„ëŒ€ì°¨ê¸°ê°„ ë§Œë£Œ ì „ 6ì›”ë¶€í„° 1ì›”ê¹Œì§€ ì‚¬ì´ì— ê°±ì‹ ê±°ì ˆì˜ í†µì§€ë¥¼ í•˜ì§€ ì•„ë‹ˆí•œ ê²½ìš° ë¬µì‹œì  ê°±ì‹ ëœ ê²ƒìœ¼ë¡œ ë³¸ë‹¤.<br/>
                            <strong>ì œ3ì¡° (ìš©ë„ë³€ê²½ ë° ì „ëŒ€ ë“±)</strong> ì„ì°¨ì¸ì€ ì„ëŒ€ì¸ì˜ ë™ì˜ ì—†ì´ ìš©ë„ë‚˜ êµ¬ì¡°ë¥¼ ë³€ê²½í•˜ê±°ë‚˜ ì „ëŒ€í•  ìˆ˜ ì—†ë‹¤.<br/>
                            <strong>ì œ4ì¡° (ê³„ì•½ì˜ í•´ì§€)</strong> ì°¨ì„ì„ 2ê¸° ì´ìƒ ì—°ì²´í•˜ê±°ë‚˜ ì œ3ì¡°ë¥¼ ìœ„ë°˜í•œ ê²½ìš° ê³„ì•½ì„ í•´ì§€í•  ìˆ˜ ìˆë‹¤.<br/>
                            <strong>ì œ5ì¡° (ê³„ì•½ì˜ ì¢…ë£Œ)</strong> ê³„ì•½ ì¢…ë£Œ ì‹œ ì„ì°¨ì¸ì€ ë¶€ë™ì‚°ì„ ì›ìƒìœ¼ë¡œ íšŒë³µí•˜ì—¬ ë°˜í™˜í•œë‹¤.<br/>
                            <strong>ì œ6ì¡° (íŠ¹ì•½ì‚¬í•­)</strong> ë³¸ ê³„ì•½ì€ ë¹„ëŒ€ë©´ ì „ìê³„ì•½ ì‹œìŠ¤í…œì„ í†µí•´ ì‘ì„±ë˜ì—ˆìœ¼ë©°, ìƒí˜¸ í•©ì˜í•˜ì— ì„œëª… ë‚ ì¸í•œë‹¤.
                        </div>

                        <div className="doc-section">4. ì¸ì ì‚¬í•­ ë° ì„œëª…</div>
                        <div style={{display:'flex', gap:'15px', marginTop:'20px', borderTop:'2px solid black', paddingTop:'15px'}}>
                            <div style={{flex:1, border:'1px solid #ccc', padding:'10px'}}>
                                <div style={{fontWeight:'bold', marginBottom:'8px', fontSize:'11pt'}}>[ì„ëŒ€ì¸]</div>
                                <div style={{marginBottom:'4px', fontSize:'10pt'}}><span style={{fontWeight:'bold', width:'50px', display:'inline-block'}}>ì£¼ì†Œ:</span> {data.lessorAddress}</div>
                                <div style={{marginBottom:'4px', fontSize:'10pt'}}><span style={{fontWeight:'bold', width:'50px', display:'inline-block'}}>ì£¼ë¯¼:</span> {data.lessorId}</div>
                                <div style={{marginBottom:'4px', fontSize:'10pt'}}><span style={{fontWeight:'bold', width:'50px', display:'inline-block'}}>ì „í™”:</span> {data.lessorPhone}</div>
                                <div style={{marginBottom:'4px', fontSize:'10pt'}}><span style={{fontWeight:'bold', width:'50px', display:'inline-block'}}>ì„±ëª…:</span> {data.lessorName} (ì¸)</div>
                                <div style={{marginTop:'8px', background:'#eee', padding:'5px', fontSize:'9pt'}}>
                                    <strong>ê³„ì¢Œ:</strong> {data.bankName} {data.accountNum}
                                </div>
                            </div>
                            <div style={{flex:1, border:'1px solid #ccc', padding:'10px'}}>
                                <div style={{fontWeight:'bold', marginBottom:'8px', fontSize:'11pt'}}>[ì„ì°¨ì¸]</div>
                                <div style={{marginBottom:'4px', fontSize:'10pt'}}><span style={{fontWeight:'bold', width:'50px', display:'inline-block'}}>ì£¼ì†Œ:</span> {data.lesseeAddress}</div>
                                <div style={{marginBottom:'4px', fontSize:'10pt'}}><span style={{fontWeight:'bold', width:'50px', display:'inline-block'}}>ì£¼ë¯¼:</span> {data.lesseeId}</div>
                                <div style={{marginBottom:'4px', fontSize:'10pt'}}><span style={{fontWeight:'bold', width:'50px', display:'inline-block'}}>ì „í™”:</span> {data.lesseePhone}</div>
                                <div style={{marginBottom:'4px', fontSize:'10pt'}}><span style={{fontWeight:'bold', width:'50px', display:'inline-block'}}>ì„±ëª…:</span> {data.lesseeName} (ì¸)</div>
                            </div>
                        </div>

                        <div style={{textAlign:'center', marginTop:'40px', fontSize:'11pt'}}>
                            ì‘ì„±ì¼ì: {new Date().toLocaleDateString()}
                        </div>
                    </div>

                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
